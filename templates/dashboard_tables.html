<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Mutual Fund Holdings</title>

    <!-- Fonts from dashboard.html -->
    <link href="https://fonts.googleapis.com/css2?family=Nunito:wght@400;600;700&family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">

    <style>
        body {
            font-family: 'Roboto', sans-serif;
            margin: 20px 0;
            background-image: url("{{ url_for('static', filename='images/dashboard_background.png') }}");
            background-size: cover;
            background-position: center;
            background-repeat: no-repeat;
            background-attachment: fixed;
            color: #111;
        }

        h1, h2, h3, h4, h5, h6,
        .banner {
            font-family: 'Nunito', sans-serif;
            color: #22577A;
        }

        /* Banner styled like dashboard.html */
        .banner {
            background-color: #468FAF;
            color: white;
            text-align: center;
            padding: 20px 0;
            font-size: 2.2em;
            font-weight: bold;
            border-radius: 12px;
            max-width: 95%;
            margin: 0 auto 40px auto;
            box-shadow: 0 2px 8px rgba(0,0,0,0.3);
        }

        .link-row {
            max-width: 95%;
            margin: -30px auto 20px auto;
            text-align: right;
        }
        .link-row a {
            font-size: 1em;
            color: #22577A;
            text-decoration: underline;
            font-weight: 600;
            font-family: 'Roboto', sans-serif;
        }

        .page-content {
            padding-bottom: 40px;
        }

        .section-title {
            font-size: 1.4em;
            font-weight: 700;
            margin: 20px auto 8px auto;
            width: 95%;
            text-align: left;
            font-family: 'Nunito', sans-serif;
        }

        /* Remove alternating white rows from tables */
        table tr:nth-child(even) {
            background-color: transparent !important;
        }
        table tr:nth-child(odd) {
            background-color: transparent !important;
        }
        table {
            background-color: transparent !important;
        }
    </style>
</head>
<body>

    <div class="banner">
        Mutual Fund Holdings
    </div>

    <div class="page-content">

        <!-- Equity Section -->
        <div class="section equity-section">
            {% include 'components/equity_table.html' %}
        </div>

        <!-- Debt Section -->
        <div class="section debt-section">
            {% include 'components/debt_table.html' %}
        </div>

        <!-- Hybrid Section -->
        <div class="section hybrid-section">
            {% include 'components/hybrid_table.html' %}
        </div>

        <!-- Commodity Section -->
        <div class="section commodity-section">
            {% include 'components/commodity_table.html' %}
        </div>

        <!-- NAV update reference Section -->
        <h4 class="mt-4" style="margin-top: 30px; width: 95%; margin-left: auto; margin-right: auto;">
            ✅ Last NAV Update: {{ last_nav_update if last_nav_update else "—" }}
        </h4>


        <!-- ✅ Update Data Footer -->
        <div style="text-align: center; margin-top: 40px; font-family: 'Nunito', sans-serif; font-weight: 600;">
                Update Data:
                <a href="{{ url_for('dashboard_tables_bp.add_transactions', user_id=user.id) }}"
                   style="color: #22577A; text-decoration: none; margin: 0 10px;">
                    Add Transactions
                </a> |
                <a href="{{ url_for('dashboard_tables_bp.confirm_deletion', user_id=user.id, registrar='CAMS') }}"
                   style="color: #22577A; text-decoration: none; margin: 0 10px;">
                    Reset CAMS Data
                </a> |
                <a href="{{ url_for('dashboard_tables_bp.confirm_deletion', user_id=user.id, registrar='Karvy') }}"
                   style="color: #22577A; text-decoration: none; margin: 0 10px;">
                    Reset Karvy Data
                </a>
        </div>


    </div> <!-- end .page-content -->

    <script>
        function confirmDelete(form) {
            const reason = form.querySelector('input[name="reason"]').value.trim();
            if (!reason) {
                alert("Please enter a reason for deletion.");
                return false;
            }
            return confirm("Are you sure you want to delete this data?");
        }
    </script>

<div style="
    position: fixed;
    bottom: 20px;
    right: 25px;
    font-family: 'Nunito', sans-serif;
    font-size: 0.95em;
    background: rgba(189, 232, 245, 0.55);
    padding: 8px 14px;
    border-radius: 8px;
    box-shadow: 0 2px 6px rgba(0,0,0,0.2);
    transition: background 0.25s ease, transform 0.25s ease;
"
onmouseover="this.style.background='rgba(189, 232, 245, 0.9)'; this.style.transform='scale(1.05)';"
onmouseout="this.style.background='rgba(189, 232, 245, 0.55)'; this.style.transform='scale(1.0)';"
>
    <a href="{{ url_for('dashboard_bp.dashboard', user_id=user.id) }}"
       style="color: #22577A; text-decoration: none; font-weight: 600;">
        View Personal Dashboard
    </a>
</div>

</body>
</html>
